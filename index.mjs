// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import e from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-read-only-property@esm/index.mjs";import t from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-function@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-copy@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-inherit@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-property@esm/index.mjs";import a from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-next-tick@esm/index.mjs";import d from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-plain-object@esm/index.mjs";import l from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-has-own-property@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-boolean@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-number@esm/index.mjs";import p from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-buffer@esm/index.mjs";import c from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-string@esm/index.mjs";import m from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-error@esm/index.mjs";import f from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import g from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-string@esm/index.mjs";import b from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-ctor@esm/index.mjs";import v from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import w from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-uint8array@esm/index.mjs";import y from"https://cdn.jsdelivr.net/gh/stdlib-js/buffer-from-arraybuffer@esm/index.mjs";import j from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-iterator-like@esm/index.mjs";import _ from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-integer@esm/index.mjs";import M from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-regexp@esm/index.mjs";function O(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})})),t}var E="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function T(){throw new Error("setTimeout has not been defined")}function k(){throw new Error("clearTimeout has not been defined")}var S=T,x=k;function W(e){if(S===setTimeout)return setTimeout(e,0);if((S===T||!S)&&setTimeout)return S=setTimeout,setTimeout(e,0);try{return S(e,0)}catch(t){try{return S.call(null,e,0)}catch(t){return S.call(this,e,0)}}}"function"==typeof E.setTimeout&&(S=setTimeout),"function"==typeof E.clearTimeout&&(x=clearTimeout);var V,P=[],z=!1,N=-1;function C(){z&&V&&(z=!1,V.length?P=V.concat(P):N=-1,P.length&&J())}function J(){if(!z){var e=W(C);z=!0;for(var t=P.length;t;){for(V=P,P=[];++N<t;)V&&V[N].run();N=-1,t=P.length}V=null,z=!1,function(e){if(x===clearTimeout)return clearTimeout(e);if((x===k||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(e);try{x(e)}catch(t){try{return x.call(null,e)}catch(t){return x.call(this,e)}}}(e)}}function H(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];P.push(new I(e,t)),1!==P.length||z||W(J)}function I(e,t){this.fun=e,this.array=t}I.prototype.run=function(){this.fun.apply(null,this.array)};var R={},A=[],F={},q={},D={};function L(){}var B=L,U=L,G=L,K=L,Q=L,X=L,Y=L;function Z(e){throw new Error("process.binding is not supported")}function $(){return"/"}function ee(e){throw new Error("process.chdir is not supported")}function te(){return 0}var ie=E.performance||{},re=ie.now||ie.mozNow||ie.msNow||ie.oNow||ie.webkitNow||function(){return(new Date).getTime()};function ne(e){var t=.001*re.call(ie),i=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(i-=e[0],(r-=e[1])<0&&(i--,r+=1e9)),[i,r]}var oe=new Date;function se(){return(new Date-oe)/1e3}var ae={nextTick:H,title:"browser",browser:true,env:R,argv:A,version:"",versions:F,on:B,addListener:U,once:G,off:K,removeListener:Q,removeAllListeners:X,emit:Y,binding:Z,cwd:$,chdir:ee,umask:te,hrtime:ne,platform:"browser",release:q,config:D,uptime:se},de=Object.freeze({__proto__:null,addListener:U,argv:A,binding:Z,browser:true,chdir:ee,config:D,cwd:$,default:ae,emit:Y,env:R,hrtime:ne,nextTick:H,off:K,on:B,once:G,platform:"browser",release:q,removeAllListeners:X,removeListener:Q,title:"browser",umask:te,uptime:se,version:"",versions:F}),le=require("stream");"disable"===ae.env.READABLE_STREAM&&le?(module.exports=le,exports=module.exports=le.Readable,exports.Readable=le.Readable,exports.Writable=le.Writable,exports.Duplex=le.Duplex,exports.Transform=le.Transform,exports.PassThrough=le.PassThrough,exports.Stream=le):(exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=le||exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"));var ue=O(Object.freeze({__proto__:null})),he={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1},pe=d,ce=l,me=u.isPrimitive,fe=h.isPrimitive,ge=n;var be=function(e,t){return pe(t)?ce(t,"objectMode")&&(e.objectMode=t.objectMode,!me(e.objectMode))?new TypeError(ge("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):ce(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!me(e.readableObjectMode))?new TypeError(ge("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):ce(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!me(e.allowHalfOpen))?new TypeError(ge("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):ce(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!fe(e.highWaterMark))?new TypeError(ge("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(ge("invalid argument. Options argument must be an object. Value: `%s`.",t))};module.exports=void 0!==ae&&"renderer"===ae.type?require("./browser.js"):require("./node.js");var ve=O(Object.freeze({__proto__:null})),we=ve("inspect-stream"),ye=ue.Transform,je=i,_e=r,Me=n,Oe=s,Ee=t,Te=a,ke=he,Se=be,xe=we;function We(e,t){var i,r,n;if(!(this instanceof We))return arguments.length>1?new We(e,t):new We(e);if(r=_e(ke),arguments.length>1){if(i=t,n=Se(r,e))throw n}else i=e;if(!je(i))throw new TypeError(Me("invalid argument. Callback argument must be a function. Value: `%s`.",i));return r.writableObjectMode=!0,xe("Creating a transform stream configured with the following options: %s.",JSON.stringify(r)),ye.call(this,r),Oe(this,"_destroyed",!1),Oe(this,"_idx",-1),Ee(this,"_inspect",i),this}o(We,ye),Ee(We.prototype,"_transform",(function(e,t,i){this._idx+=1,xe("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this.push(e),i()})),Ee(We.prototype,"_flush",(function(e){xe("Flushing the stream..."),e()})),Ee(We.prototype,"destroy",(function(e){var t;return this._destroyed?(xe("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Te((function(){e&&(xe("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));xe("Closing the stream..."),t.emit("close")})),this)}));var Ve=d,Pe=n,ze=r,Ne=We;var Ce=d,Je=n,He=r,Ie=We;var Re=t,Ae=We,Fe=function(e){var t;if(arguments.length){if(!Ce(e))throw new TypeError(Je("invalid argument. Options argument must be an object. Value: `%s`.",e));t=He(e)}else t={};return i;function i(e){return new Ie(t,e)}};Re(Ae,"objectMode",(function(e,t){var i,r;if(arguments.length>1){if(!Ve(e))throw new TypeError(Pe("invalid argument. Options argument must be an object. Value: `%s`.",e));i=ze(e),r=t}else i={},r=e;return i.objectMode=!0,new Ne(i,r)})),Re(Ae,"factory",Fe);var qe=Ae,De=ve("debug-stream"),Le={objectMode:!1,allowHalfOpen:!1,readableObjectMode:!1,name:""},Be=d,Ue=l,Ge=u.isPrimitive,Ke=h.isPrimitive,Qe=c.isPrimitive,Xe=n;var Ye=qe,Ze=i,$e=p,et=n,tt=r,it=De,rt=Le,nt=function(e,t){return Be(t)?Ue(t,"name")&&(e.name=t.name,!Qe(e.name))?new TypeError(Xe("invalid option. `%s` option must be a string. Option: `%s`.","name",e.name)):Ue(t,"objectMode")&&(e.objectMode=t.objectMode,!Ge(e.objectMode))?new TypeError(Xe("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Ue(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!Ge(e.readableObjectMode))?new TypeError(Xe("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):Ue(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!Ge(e.allowHalfOpen))?new TypeError(Xe("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Ue(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Ke(e.highWaterMark))?new TypeError(Xe("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(Xe("invalid argument. Options argument must be an object. Value: `%s`.",t))},ot=ve;function st(e,t){var i,r,n,o,s;if(!(this instanceof st))return arguments.length>1?new st(e,t):1===arguments.length?new st(e):new st;if(i=tt(rt),arguments.length>1){if(!Ze(t))throw new TypeError(et("invalid argument. Callback argument must be a function. Value: `%s`.",t));s=t,o=nt(i,e)}else arguments.length&&(Ze(e)?s=e:o=nt(i,e));if(o)throw o;return r=i.name?"debug-stream:"+i.name:"debug-stream",n=ot(r),it("Creating a transform stream configured with the following options: %s.",JSON.stringify(i)),Ye.call(this,i,a),this;function a(e,t){if(s)return it("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),s(n,e,t);$e(e)&&(e=e.toString()),e=JSON.stringify(e),it("Received a new chunk. Chunk: %s. Index: %d.",e,t),n("Chunk: %s. Index: %d.",e,t)}}o(st,Ye);var at=i,dt=d,lt=n,ut=r,ht=st;var pt=d,ct=n,mt=r,ft=st;var gt=function(e){var t;if(arguments.length){if(!pt(e))throw new TypeError(ct("invalid argument. Options argument must be an object. Value: `%s`.",e));t=mt(e)}else t={};return i;function i(e,i){return t.name=e,arguments.length>1?new ft(t,i):new ft(t)}},bt=t,vt=st,wt=gt;bt(vt,"objectMode",(function(e,t){var i,r;if(arguments.length>1){if(!dt(e))throw new TypeError(lt("invalid argument. Options argument must be an object. Value: `%s`.",e));if(i=ut(e),r=t,!at(t))throw new TypeError(lt("invalid argument. Callback argument must be a function. Value: `%s`.",t))}else if(arguments.length)if(at(e))i={},r=e;else{if(!dt(e))throw new TypeError(lt("invalid argument. Options argument must be an object. Value: `%s`.",e));i=ut(e)}else i={};return i.objectMode=!0,void 0===r?new ht(i):new ht(i,r)})),bt(vt,"factory",wt);var yt=vt,jt={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8"},_t=d,Mt=l,Ot=u.isPrimitive,Et=c.isPrimitive,Tt=h.isPrimitive,kt=n;var St=function(e,t){return _t(t)?Mt(t,"objectMode")&&(e.objectMode=t.objectMode,!Ot(e.objectMode))?new TypeError(kt("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Mt(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Tt(e.highWaterMark))?new TypeError(kt("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Mt(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!Ot(e.decodeStrings))?new TypeError(kt("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):Mt(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!Et(e.defaultEncoding))?new TypeError(kt("invalid option. `%s` option must be a string. Option: `%s`.","defaultEncoding",e.defaultEncoding)):null:new TypeError(kt("invalid argument. Options argument must be an object. Value: `%s`.",t))},xt=ve("inspect-stream-sink"),Wt=ue.Writable,Vt=i,Pt=r,zt=s,Nt=t,Ct=a,Jt=n,Ht=jt,It=St,Rt=xt;function At(e,t){var i,r,n;if(!(this instanceof At))return arguments.length>1?new At(e,t):new At(e);if(r=Pt(Ht),arguments.length>1){if(i=t,n=It(r,e))throw n}else i=e;if(!Vt(i))throw new TypeError(Jt("invalid argument. Callback argument must be a function. Value: `%s`.",i));return Rt("Creating a writable stream configured with the following options: %s.",JSON.stringify(r)),Wt.call(this,r),zt(this,"_destroyed",!1),zt(this,"_idx",-1),Nt(this,"_inspect",i),this}o(At,Wt),Nt(At.prototype,"_write",(function(e,t,i){if(this._idx+=1,Rt("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),this._inspect.call(null,e,this._idx),this._destroyed)return Ct(i);i()})),Nt(At.prototype,"destroy",(function(e){var t;return this._destroyed?(Rt("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Ct((function(){e&&(Rt("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Rt("Closing the stream..."),t.emit("close")})),this)}));var Ft=d,qt=n,Dt=r,Lt=At;var Bt=d,Ut=n,Gt=r,Kt=At;var Qt=t,Xt=At,Yt=function(e){var t;if(arguments.length){if(!Bt(e))throw new TypeError(Ut("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Gt(e)}else t={};return i;function i(e){return new Kt(t,e)}};Qt(Xt,"objectMode",(function(e,t){var i,r;if(arguments.length>1){if(!Ft(e))throw new TypeError(qt("invalid argument. Options argument must be an object. Value: `%s`.",e));i=Dt(e),r=t}else i={},r=e;return i.objectMode=!0,new Lt(i,r)})),Qt(Xt,"factory",Yt);var Zt=Xt,$t=ve("debug-stream-sink"),ei={objectMode:!1,decodeStrings:!0,defaultEncoding:"utf8",name:""},ti=d,ii=l,ri=u.isPrimitive,ni=h.isPrimitive,oi=c.isPrimitive,si=n;var ai=Zt,di=i,li=p,ui=n,hi=r,pi=$t,ci=ei,mi="debug-stream-sink",fi=function(e,t){return ti(t)?ii(t,"name")&&(e.name=t.name,!oi(e.name))?new TypeError(si("invalid option. `%s` option must be a string. Option: `%s`.","name",e.name)):ii(t,"objectMode")&&(e.objectMode=t.objectMode,!ri(e.objectMode))?new TypeError(si("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):ii(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!ni(e.highWaterMark))?new TypeError(si("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):ii(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!ri(e.decodeStrings))?new TypeError(si("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):ii(t,"defaultEncoding")&&(e.defaultEncoding=t.defaultEncoding,!oi(e.defaultEncoding))?new TypeError(si("invalid option. `%s` option must be a string. Option: `%s`.","defaultEncoding",e.defaultEncoding)):null:new TypeError(si("invalid argument. Options argument must be an object. Value: `%s`.",t))},gi=ve;function bi(e,t){var i,r,n,o,s;if(!(this instanceof bi))return arguments.length>1?new bi(e,t):1===arguments.length?new bi(e):new bi;if(i=hi(ci),arguments.length>1){if(!di(t))throw new TypeError(ui("invalid argument. Callback argument must be a function. Value: `%s`.",t));s=t,o=fi(i,e)}else arguments.length&&(di(e)?s=e:o=fi(i,e));if(o)throw o;return r=i.name?mi+":"+i.name:mi,n=gi(r),pi("Creating a writable stream configured with the following options: %s.",JSON.stringify(i)),ai.call(this,i,a),this;function a(e,t){if(s)return pi("Received a new chunk. Chunk: %s. Index: %d.",e.toString(),t),s(n,e,t);li(e)&&(e=e.toString()),e=JSON.stringify(e),pi("Received a new chunk. Chunk: %s. Index: %d.",e,t),n("Chunk: %s. Index: %d.",e,t)}}o(bi,ai);var vi=i,wi=d,yi=n,ji=r,_i=bi;var Mi=d,Oi=n,Ei=r,Ti=bi;var ki=function(e){var t;if(arguments.length){if(!Mi(e))throw new TypeError(Oi("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ei(e)}else t={};return i;function i(e,i){return t.name=e,arguments.length>1?new Ti(t,i):new Ti(t)}},Si=t,xi=bi,Wi=ki;Si(xi,"objectMode",(function(e,t){var i,r;if(arguments.length>1){if(!wi(e))throw new TypeError(yi("invalid argument. Options argument must be an object. Value: `%s`.",e));if(i=ji(e),r=t,!vi(t))throw new TypeError(yi("invalid argument. Callback argument must be a function. Value: `%s`.",t))}else if(arguments.length)if(vi(e))i={},r=e;else{if(!wi(e))throw new TypeError(yi("invalid argument. Options argument must be an object. Value: `%s`.",e));i=ji(e)}else i={};return i.objectMode=!0,void 0===r?new _i(i):new _i(i,r)})),Si(xi,"factory",Wi);var Vi=xi,Pi={objectMode:!1},zi=d,Ni=l,Ci=u.isPrimitive,Ji=n;var Hi=function(e,t){return zi(t)?Ni(t,"objectMode")&&(e.objectMode=t.objectMode,!Ci(e.objectMode))?new TypeError(Ji("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):null:new TypeError(Ji("invalid argument. Options argument must be an object. Value: `%s`.",t))},Ii=ve("empty-stream"),Ri=ue.Readable,Ai=m,Fi=r,qi=s,Di=t,Li=a,Bi=Pi,Ui=Hi,Gi=Ii;function Ki(e){var t,i;if(!(this instanceof Ki))return arguments.length>0?new Ki(e):new Ki;if(t=Fi(Bi),arguments.length>0&&(i=Ui(t,e)))throw i;return Gi("Creating a readable stream configured with the following options: %s.",JSON.stringify(t)),Ri.call(this,t),qi(this,"_destroyed",!1),this}o(Ki,Ri),Di(Ki.prototype,"_read",(function(){this.push(null)})),Di(Ki.prototype,"destroy",(function(e){var t;return this._destroyed?(Gi("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Li((function(){e&&(Gi("Stream was destroyed due to an error. Error: %s.",Ai(e)?e.message:JSON.stringify(e)),t.emit("error",e));Gi("Closing the stream..."),t.emit("close")})),this)}));var Qi=Ki;var Xi=r,Yi=Ki;var Zi=t,$i=Ki,er=function(e){var t;return t=arguments.length>0?Xi(e,1):{},i;function i(){return new Yi(t)}};Zi($i,"objectMode",(function(){return new Qi({objectMode:!0})})),Zi($i,"factory",er);var tr=$i,ir={objectMode:!1,encoding:null,sep:"\n",dir:1},rr=d,nr=l,or=u.isPrimitive,sr=h.isPrimitive,ar=c.isPrimitive,dr=i,lr=n;var ur=function(e,t){return rr(t)?nr(t,"sep")&&(e.sep=t.sep,!ar(e.sep))?new TypeError(lr("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):nr(t,"objectMode")&&(e.objectMode=t.objectMode,!or(e.objectMode))?new TypeError(lr("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):nr(t,"encoding")&&(e.encoding=t.encoding,!ar(e.encoding)&&null!==e.encoding)?new TypeError(lr("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):nr(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!sr(e.highWaterMark))?new TypeError(lr("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):nr(t,"serialize")&&(e.serialize=t.serialize,!dr(e.serialize))?new TypeError(lr("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):nr(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError(lr("invalid option. `%s` option must be either `1` or `-1`. Option: `%s`.","dir",e.dir)):null:new TypeError(lr("invalid argument. Options argument must be an object. Value: `%s`.",t))},hr=ve("from-array-stream"),pr=ue.Readable,cr=f,mr=m,fr=p,gr=n,br=r,vr=s,wr=t,yr=g,jr=b,_r=a,Mr=ir,Or=ur,Er=hr;function Tr(e,t){var i,r;if(!(this instanceof Tr))return arguments.length>1?new Tr(e,t):new Tr(e);if(!cr(e))throw new TypeError(gr("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(i=br(Mr),arguments.length>1&&(r=Or(i,t)))throw r;return Er("Creating a readable stream configured with the following options: %s.",JSON.stringify(i)),pr.call(this,i),vr(this,"_destroyed",!1),wr(this,"_objectMode",i.objectMode),wr(this,"_sep",i.sep),wr(this,"_serialize",i.serialize||JSON.stringify),wr(this,"_src",e),wr(this,"_stride",i.dir),vr(this,"_i",0),vr(this,"_idx",1===i.dir?0:e.length-1),this}o(Tr,pr),wr(Tr.prototype,"_read",(function(){var e,t,i;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._src.length)return Er("Finished iteration."),this.push(null);i=this._src[this._idx],Er("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(i),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(i=this._serialize(i))?i=1===this._i?yr(i):yr(this._sep+i):fr(i)?this._i>1&&(i=jr.concat([yr(this._sep),i])):t=new Error(gr("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",i))),t?this.emit("error",t):e=this.push(i)}})),wr(Tr.prototype,"destroy",(function(e){var t;return this._destroyed?(Er("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,_r((function(){e&&(Er("Stream was destroyed due to an error. Error: %s.",mr(e)?e.message:JSON.stringify(e)),t.emit("error",e));Er("Closing the stream..."),t.emit("close")})),this)}));var kr=d,Sr=n,xr=r,Wr=Tr;var Vr=function(e,t){var i;if(arguments.length>1){if(!kr(i=t))throw new TypeError(Sr("invalid argument. Options argument must be an object. Value: `%s`.",i));i=xr(t,1)}else i={};return i.objectMode=!0,new Wr(e,i)},Pr=r,zr=Tr;var Nr=function(e){var t;return t=arguments.length?Pr(e,1):{},i;function i(e){return new zr(e,t)}},Cr=t,Jr=Tr,Hr=Nr;Cr(Jr,"objectMode",Vr),Cr(Jr,"factory",Hr);var Ir=Jr,Rr={objectMode:!1,encoding:null,sep:"\n",iter:1e308,dir:1},Ar=d,Fr=l,qr=u.isPrimitive,Dr=h.isPrimitive,Lr=v.isPrimitive,Br=c.isPrimitive,Ur=i,Gr=n;var Kr=function(e,t){return Ar(t)?Fr(t,"sep")&&(e.sep=t.sep,!Br(e.sep))?new TypeError(Gr("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Fr(t,"objectMode")&&(e.objectMode=t.objectMode,!qr(e.objectMode))?new TypeError(Gr("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Fr(t,"encoding")&&(e.encoding=t.encoding,!Br(e.encoding)&&null!==e.encoding)?new TypeError(Gr("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Fr(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Dr(e.highWaterMark))?new TypeError(Gr("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Fr(t,"serialize")&&(e.serialize=t.serialize,!Ur(e.serialize))?new TypeError(Gr("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):Fr(t,"iter")&&(e.iter=t.iter,!Lr(e.iter))?new TypeError(Gr("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","iter",e.iter)):Fr(t,"dir")&&(e.dir=t.dir,1!==e.dir&&-1!==e.dir)?new TypeError(Gr("invalid option. `%s` option must be either `1` or `-1`. Option: `%s`.","dir",e.dir)):null:new TypeError(Gr("invalid argument. Options argument must be an object. Value: `%s`.",t))},Qr=ve("from-circular-array-stream"),Xr=ue.Readable,Yr=f,Zr=m,$r=p,en=r,tn=s,rn=t,nn=g,on=b,sn=a,an=n,dn=Rr,ln=Kr,un=Qr;function hn(e,t){var i,r;if(!(this instanceof hn))return arguments.length>1?new hn(e,t):new hn(e);if(!Yr(e))throw new TypeError(an("invalid argument. First argument must be an array-like object. Value: `%s`.",e));if(i=en(dn),arguments.length>1&&(r=ln(i,t)))throw r;return un("Creating a readable stream configured with the following options: %s.",JSON.stringify(i)),Xr.call(this,i),tn(this,"_destroyed",!1),rn(this,"_objectMode",i.objectMode),rn(this,"_sep",i.sep),rn(this,"_serialize",i.serialize||JSON.stringify),rn(this,"_src",e),rn(this,"_stride",i.dir),rn(this,"_iter",i.iter),tn(this,"_i",0),tn(this,"_idx",1===i.dir?-1:e.length),this}o(hn,Xr),rn(hn.prototype,"_read",(function(){var e,t,i;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._iter||0===this._src.length)return un("Finished iteration."),this.push(null);this._idx+=this._stride,this._stride>0&&this._idx>=this._src.length?this._idx%=this._src.length:this._stride<0&&this._idx<0&&(this._idx+=this._src.length),i=this._src[this._idx],un("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(i),this._idx,this._i),!1===this._objectMode&&("string"==typeof(i=this._serialize(i))?i=1===this._i?nn(i):nn(this._sep+i):$r(i)?this._i>1&&(i=on.concat([nn(this._sep),i])):t=new Error(an("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",i))),t?this.emit("error",t):e=this.push(i)}})),rn(hn.prototype,"destroy",(function(e){var t;return this._destroyed?(un("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,sn((function(){e&&(un("Stream was destroyed due to an error. Error: %s.",Zr(e)?e.message:JSON.stringify(e)),t.emit("error",e));un("Closing the stream..."),t.emit("close")})),this)}));var pn=d,cn=n,mn=r,fn=hn;var gn=function(e,t){var i;if(arguments.length>1){if(!pn(i=t))throw new TypeError(cn("invalid argument. Options argument must be an object. Value: `%s`.",i));i=mn(t,1)}else i={};return i.objectMode=!0,new fn(e,i)},bn=r,vn=hn;var wn=function(e){var t;return t=arguments.length?bn(e,1):{},i;function i(e){return new vn(e,t)}},yn=t,jn=hn,_n=wn;yn(jn,"objectMode",gn),yn(jn,"factory",_n);var Mn=jn,On={objectMode:!1,encoding:null,sep:"\n",iter:1e308},En=d,Tn=l,kn=u.isPrimitive,Sn=h.isPrimitive,xn=c.isPrimitive,Wn=v.isPrimitive,Vn=n;var Pn=function(e,t){return En(t)?Tn(t,"sep")&&(e.sep=t.sep,!xn(e.sep))?new TypeError(Vn("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Tn(t,"objectMode")&&(e.objectMode=t.objectMode,!kn(e.objectMode))?new TypeError(Vn("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Tn(t,"encoding")&&(e.encoding=t.encoding,!xn(e.encoding)&&null!==e.encoding)?new TypeError(Vn("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Tn(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Sn(e.highWaterMark))?new TypeError(Vn("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Tn(t,"iter")&&(e.iter=t.iter,!Wn(e.iter))?new TypeError(Vn("invalid option. `%s` option must be a nonnegative integer. Option: `%s`.","iter",e.iter)):null:new TypeError(Vn("invalid argument. Options argument must be an object. Value: `%s`.",t))},zn=ve("from-constant-stream"),Nn=ue.Readable,Cn=m,Jn=c.isPrimitive,Hn=p,In=w,Rn=y,An=g,Fn=b,qn=r,Dn=n,Ln=s,Bn=t,Un=a,Gn=On,Kn=Pn,Qn=zn;function Xn(e,t){var i,r;if(!(this instanceof Xn))return arguments.length>1?new Xn(e,t):new Xn(e);if(i=qn(Gn),arguments.length>1&&(r=Kn(i,t)))throw r;if(!1===i.objectMode)if(Jn(e))e=An(e);else if(Hn(e));else{if(!In(e))throw new TypeError(Dn("invalid argument. In binary mode, a provided value must be a string, Buffer, or Uint8Array. Value: `%s`.",e));e=Rn(e.buffer,e.byteOffset,e.length)}return Qn("Creating a readable stream configured with the following options: %s.",JSON.stringify(i)),Nn.call(this,i),Ln(this,"_destroyed",!1),Bn(this,"_objectMode",i.objectMode),Bn(this,"_sep",An(i.sep)),Bn(this,"_iter",i.iter),Bn(this,"_value",e),Ln(this,"_i",0),this}o(Xn,Nn),Bn(Xn.prototype,"_read",(function(){var e;if(!this._destroyed)for(e=!0;e;){if(this._i+=1,this._i>this._iter)return Qn("Finished iteration."),this.push(null);Qn("Value: %s. Iter: %d.",this._value,this._i),e=!1===this._objectMode&&this._i>1?this.push(Fn.concat([this._sep,this._value])):this.push(this._value)}})),Bn(Xn.prototype,"destroy",(function(e){var t;return this._destroyed?(Qn("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Un((function(){e&&(Qn("Stream was destroyed due to an error. Error: %s.",Cn(e)?e.message:JSON.stringify(e)),t.emit("error",e));Qn("Closing the stream..."),t.emit("close")})),this)}));var Yn=d,Zn=n,$n=r,eo=Xn;var to=l,io=r,ro=Xn;var no=t,oo=Xn,so=function(e,t){var i,r,n;return 0===(i=arguments.length)?(r={},n=!0):1===i?null!==e&&"object"==typeof e&&(to(e,"sep")||to(e,"iter")||to(e,"objectMode")||to(e,"encoding")||to(e,"highWaterMark"))?(r=io(e,1),n=!0):r={}:r=io(t,1),n?o:s;function o(e){return new ro(e,r)}function s(){return new ro(e,r)}};no(oo,"objectMode",(function(e,t){var i;if(arguments.length>1){if(!Yn(i=t))throw new TypeError(Zn("invalid argument. Options argument must be an object. Value: `%s`.",i));i=$n(t,1)}else i={};return i.objectMode=!0,new eo(e,i)})),no(oo,"factory",so);var ao=oo,lo={objectMode:!1,encoding:null,sep:"\n"},uo=d,ho=l,po=u.isPrimitive,co=h.isPrimitive,mo=c.isPrimitive,fo=i,go=n;var bo=function(e,t){return uo(t)?ho(t,"sep")&&(e.sep=t.sep,!mo(e.sep))?new TypeError(go("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):ho(t,"objectMode")&&(e.objectMode=t.objectMode,!po(e.objectMode))?new TypeError(go("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):ho(t,"encoding")&&(e.encoding=t.encoding,!mo(e.encoding)&&null!==e.encoding)?new TypeError(go("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):ho(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!co(e.highWaterMark))?new TypeError(go("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):ho(t,"serialize")&&(e.serialize=t.serialize,!fo(e.serialize))?new TypeError(go("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):null:new TypeError(go("invalid argument. Options argument must be an object. Value: `%s`.",t))},vo=ve("from-iterator-stream"),wo=ue.Readable,yo=l,jo=j,_o=m,Mo=p,Oo=r,Eo=s,To=t,ko=g,So=b,xo=a,Wo=n,Vo=lo,Po=bo,zo=vo;function No(e,t){var i,r;if(!(this instanceof No))return arguments.length>1?new No(e,t):new No(e);if(!jo(e))throw new TypeError(Wo("invalid argument. First argument must be an iterator. Value: `%s`.",e));if(i=Oo(Vo),arguments.length>1&&(r=Po(i,t)))throw r;return zo("Creating a readable stream configured with the following options: %s.",JSON.stringify(i)),wo.call(this,i),Eo(this,"_destroyed",!1),To(this,"_objectMode",i.objectMode),To(this,"_sep",i.sep),To(this,"_serialize",i.serialize||JSON.stringify),To(this,"_iterator",e),Eo(this,"_i",0),this}o(No,wo),To(No.prototype,"_read",(function(){var e,t,i;if(!this._destroyed)for(e=!0;e;){if(i=this._iterator.next(),this._i+=1,i.done)return yo(i,"value")&&(i=i.value,zo("Value: %s. Iter: %d.",JSON.stringify(i),this._i),!1===this._objectMode&&("string"==typeof(i=this._serialize(i))?(i=1===this._i?ko(i):ko(this._sep+i),this.push(i)):Mo(i)?(this._i>1&&(i=So.concat([ko(this._sep),i])),this.push(i)):(t=new Error(Wo("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",i)),this.emit("error",t)))),zo("Finished iteration."),this.push(null);if(i=i.value,zo("Value: %s. Iter: %d.",JSON.stringify(i),this._i),!1===this._objectMode)if("string"==typeof(i=this._serialize(i)))i=1===this._i?ko(i):ko(this._sep+i);else{if(!Mo(i)){t=new Error(Wo("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",i)),this.emit("error",t);continue}this._i>1&&(i=So.concat([ko(this._sep),i]))}e=this.push(i)}})),To(No.prototype,"destroy",(function(e){var t;return this._destroyed?(zo("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,xo((function(){e&&(zo("Stream was destroyed due to an error. Error: %s.",_o(e)?e.message:JSON.stringify(e)),t.emit("error",e));zo("Closing the stream..."),t.emit("close")})),this)}));var Co=d,Jo=n,Ho=r,Io=No;var Ro=r,Ao=No;var Fo=t,qo=No,Do=function(e){var t;return t=arguments.length?Ro(e,1):{},i;function i(e){return new Ao(e,t)}};Fo(qo,"objectMode",(function(e,t){var i;if(arguments.length>1){if(!Co(i=t))throw new TypeError(Jo("invalid argument. Options argument must be an object. Value: `%s`.",i));i=Ho(t,1)}else i={};return i.objectMode=!0,new Io(e,i)})),Fo(qo,"factory",Do);var Lo=qo,Bo={objectMode:!1,encoding:null,sep:"\n"},Uo=d,Go=l,Ko=u.isPrimitive,Qo=h.isPrimitive,Xo=c.isPrimitive,Yo=i,Zo=n;var $o=function(e,t){return Uo(t)?Go(t,"sep")&&(e.sep=t.sep,!Xo(e.sep))?new TypeError(Zo("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Go(t,"objectMode")&&(e.objectMode=t.objectMode,!Ko(e.objectMode))?new TypeError(Zo("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Go(t,"encoding")&&(e.encoding=t.encoding,!Xo(e.encoding)&&null!==e.encoding)?new TypeError(Zo("invalid option. `%s` option must be a string or null. Option: `%s`.","encoding",e.encoding)):Go(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Qo(e.highWaterMark))?new TypeError(Zo("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Go(t,"serialize")&&(e.serialize=t.serialize,!Yo(e.serialize))?new TypeError(Zo("invalid option. `%s` option must be a function. Option: `%s`.","serialize",e.serialize)):null:new TypeError(Zo("invalid argument. Options argument must be an object. Value: `%s`.",t))},es=ve("from-strided-array-stream"),ts=ue.Readable,is=f,rs=m,ns=p,os=_.isPrimitive,ss=v.isPrimitive,as=r,ds=s,ls=t,us=g,hs=b,ps=n,cs=a,ms=Bo,fs=$o,gs=es;function bs(e,t,i,r,n){var o,s,a;if(!(this instanceof bs))return arguments.length>4?new bs(e,t,i,r,n):new bs(e,t,i,r);if(!ss(e))throw new TypeError(ps("invalid argument. First argument must be a nonnegative integer. Value: `%s`.",e));if(!is(t))throw new TypeError(ps("invalid argument. Second argument must be an array-like object. Value: `%s`.",t));if(!os(i))throw new TypeError(ps("invalid argument. Third argument must be an integer. Value: `%s`.",i));if(!ss(r))throw new TypeError(ps("invalid argument. Fourth argument must be a nonnegative integer. Value: `%s`.",r));if(e>0&&(a=r+(e-1)*i,r>=t.length||a<0||a>=t.length))throw new RangeError("invalid arguments. Strided array parameters are incompatible with the provided array-like object. Linear index exceeds array bounds.");if(o=as(ms),arguments.length>4&&(s=fs(o,n)))throw s;return gs("Creating a readable stream configured with the following options: %s.",JSON.stringify(o)),ts.call(this,o),ds(this,"_destroyed",!1),ls(this,"_objectMode",o.objectMode),ls(this,"_sep",o.sep),ls(this,"_serialize",o.serialize||JSON.stringify),ls(this,"_buffer",t),ls(this,"_N",e),ls(this,"_stride",i),ls(this,"_offset",r),ds(this,"_idx",r),ds(this,"_i",0),this}o(bs,ts),ls(bs.prototype,"_read",(function(){var e,t,i;if(!this._destroyed)for(e=!0;e;){if(t=null,this._i+=1,this._i>this._N)return gs("Finished iteration."),this.push(null);i=this._buffer[this._idx],gs("Value: %s. Idx: %d. Iter: %d.",JSON.stringify(i),this._idx,this._i),this._idx+=this._stride,!1===this._objectMode&&("string"==typeof(i=this._serialize(i))?i=1===this._i?us(i):us(this._sep+i):ns(i)?this._i>1&&(i=hs.concat([us(this._sep),i])):t=new Error(ps("invalid operation. Serialization function must return a string or Buffer. Value: `%s`.",i))),t?this.emit("error",t):e=this.push(i)}})),ls(bs.prototype,"destroy",(function(e){var t;return this._destroyed?(gs("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,cs((function(){e&&(gs("Stream was destroyed due to an error. Error: %s.",rs(e)?e.message:JSON.stringify(e)),t.emit("error",e));gs("Closing the stream..."),t.emit("close")})),this)}));var vs=d,ws=n,ys=r,js=bs;var _s=r,Ms=bs;var Os=t,Es=bs,Ts=function(e){var t;return t=arguments.length?_s(e,1):{},i;function i(e,i,r,n){return new Ms(e,i,r,n,t)}};Os(Es,"objectMode",(function(e,t,i,r,n){var o;if(arguments.length>4){if(!vs(o=n))throw new TypeError(ws("invalid argument. Options argument must be an object. Value: `%s`.",o));o=ys(n,1)}else o={};return o.objectMode=!0,new js(e,t,i,r,o)})),Os(Es,"factory",Ts);var ks=Es,Ss={objectMode:!1,encoding:null,allowHalfOpen:!1,readableObjectMode:!1,sep:"\n"},xs=d,Ws=l,Vs=u.isPrimitive,Ps=h.isPrimitive,zs=c.isPrimitive,Ns=n;var Cs=function(e,t){return xs(t)?Ws(t,"sep")&&(e.sep=t.sep,!zs(e.sep))?new TypeError(Ns("invalid option. `%s` option must be a string. Option: `%s`.","sep",e.sep)):Ws(t,"objectMode")&&(e.objectMode=t.objectMode,!Vs(e.objectMode))?new TypeError(Ns("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Ws(t,"readableObjectMode")&&(e.readableObjectMode=t.readableObjectMode,!Vs(e.readableObjectMode))?new TypeError(Ns("invalid option. `%s` option must be a boolean. Option: `%s`.","readableObjectMode",e.readableObjectMode)):Ws(t,"encoding")&&(e.encoding=t.encoding,!zs(e.encoding))?new TypeError(Ns("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):Ws(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!Vs(e.allowHalfOpen))?new TypeError(Ns("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Ws(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Ps(e.highWaterMark))?new TypeError(Ns("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(Ns("invalid argument. Options argument must be an object. Value: `%s`.",t))},Js=ve("join-stream"),Hs=ue.Transform,Is=g,Rs=r,As=b,Fs=s,qs=t,Ds=a,Ls=Ss,Bs=Cs,Us=Js;function Gs(e){var t,i;if(!(this instanceof Gs))return arguments.length?new Gs(e):new Gs;if(t=Rs(Ls),arguments.length&&(i=Bs(t,e)))throw i;return t.writableObjectMode=!0,t.decodeStrings=!1,Us("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Hs.call(this,t),Fs(this,"_destroyed",!1),qs(this,"_encoding",null===t.encoding?"utf8":t.encoding),"utf8"!==this._encoding&&(t.sep=Is(t.sep,this._encoding)),qs(this,"_sep",t.sep),Fs(this,"_init",!1),Fs(this,"_idx",-1),this}o(Gs,Hs),qs(Gs.prototype,"_transform",(function(e,t,i){var r;this._idx+=1,Us("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"utf8"===this._encoding?this._init?e=this._sep+e:this._init=!0:this._init?(e=new As(e,t),r=this._sep.length+e.length,e=(e=As.concat([this._sep,e],r)).toString(this._encoding)):this._init=!0,this.push(e,this._encoding),i()})),qs(Gs.prototype,"_flush",(function(e){Us("Flushing the stream..."),e()})),qs(Gs.prototype,"destroy",(function(e){var t;return this._destroyed?(Us("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Ds((function(){e&&(Us("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Us("Closing the stream..."),t.emit("close")})),this)}));var Ks=d,Qs=n,Xs=r,Ys=Gs;var Zs=d,$s=n,ea=r,ta=Gs;var ia=t,ra=Gs,na=function(e){var t;if(arguments.length){if(!Zs(e))throw new TypeError($s("invalid argument. Options argument must be an object. Value: `%s`.",e));t=ea(e)}else t={};return i;function i(){return new ta(t)}};ia(ra,"objectMode",(function(e){var t;if(arguments.length){if(!Ks(e))throw new TypeError(Qs("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Xs(e)}else t={};return t.objectMode=!0,new Ys(t)})),ia(ra,"factory",na);var oa=ra,sa={objectMode:!1,encoding:null,allowHalfOpen:!1,writableObjectMode:!1,sep:null},aa=d,da=l,la=u.isPrimitive,ua=h.isPrimitive,ha=c.isPrimitive,pa=M,ca=n;var ma=function(e,t){return aa(t)?!da(t,"sep")||(e.sep=t.sep,ha(e.sep)||pa(e.sep))?da(t,"objectMode")&&(e.objectMode=t.objectMode,!la(e.objectMode))?new TypeError(ca("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):da(t,"writableObjectMode")&&(e.writableObjectMode=t.writableObjectMode,!la(e.writableObjectMode))?new TypeError(ca("invalid option. `%s` option must be a boolean. Option: `%s`.","writableObjectMode",e.writableObjectMode)):da(t,"encoding")&&(e.encoding=t.encoding,!ha(e.encoding))?new TypeError(ca("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):da(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!la(e.allowHalfOpen))?new TypeError(ca("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):da(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!ua(e.highWaterMark))?new TypeError(ca("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):null:new TypeError(ca("invalid option. `%s` option must be either a string or a regular expression. Option: `%s`.","sep",e.sep)):new TypeError(ca("invalid argument. Options argument must be an object. Value: `%s`.",t))},fa=ve("split-stream"),ga=g;var ba=function(e,t){return"utf8"===t||"buffer"===t?e:(e=ga(e),t?e.toString(t):e.toString())},va=ue.Transform,wa=r,ya=s,ja=t,_a=b,Ma=a,Oa=sa,Ea=ma,Ta=fa,ka=ba,Sa=/\r?\n/;function xa(e){var t,i;if(!(this instanceof xa))return arguments.length?new xa(e):new xa;if(t=wa(Oa),arguments.length&&(i=Ea(t,e)))throw i;return t.readableObjectMode=!0,t.decodeStrings=!1,Ta("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),va.call(this,t),ja(this,"_sep",null===t.sep?Sa:t.sep),ya(this,"_destroyed",!1),ja(this,"_encoding",t.encoding),ya(this,"_buffer",""),ya(this,"_idx",-1),this}o(xa,va),ja(xa.prototype,"_transform",(function(e,t,i){var r,n,o,s;if(this._idx+=1,Ta("Received a new chunk. Chunk: %s. Encoding: %s. Index: %d.",e.toString(),t,this._idx),"buffer"===t?e=e.toString():"utf8"!==t&&(e=(e=new _a(e,t)).toString("utf8")),r=e.split(this._sep),Ta("Splits: %s. Index: %d.",JSON.stringify(r),this._idx),o=r.length-1,Ta("%s splits. Index: %d.",o,this._idx),0===o)Ta("No splits. Index: %d.",this._idx),this._buffer+=r[o];else{for(Ta("Processing splits. Index: %d.",this._index),n=this._buffer+r[0],n=ka(n,t),Ta("Split %d: %s. Index: %d.",0,n.toString(),this._idx),this.push(n,t),s=1;s<o;s++)n=ka(r[s],t),Ta("Split %d: %s. Index: %d.",s,n.toString(),this._idx),this.push(n,t);Ta("Remaining split: %s.",r[o].toString()),this._buffer=r[o]}i()})),ja(xa.prototype,"_flush",(function(e){var t=this._buffer;t&&(Ta("Processing final split..."),t=ka(t,this._encoding),this.push(t,this._encoding)),Ta("Flushing the stream..."),e()})),ja(xa.prototype,"destroy",(function(e){var t;return this._destroyed?(Ta("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,Ma((function(){e&&(Ta("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));Ta("Closing the stream..."),t.emit("close")})),this)}));var Wa=d,Va=n,Pa=r,za=xa;var Na=d,Ca=n,Ja=r,Ha=xa;var Ia=t,Ra=xa,Aa=function(e){var t;if(arguments.length){if(!Na(e))throw new TypeError(Ca("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Ja(e)}else t={};return i;function i(){return new Ha(t)}};Ia(Ra,"objectMode",(function(e){var t;if(arguments.length){if(!Wa(e))throw new TypeError(Va("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Pa(e)}else t={};return t.objectMode=!0,new za(t)})),Ia(Ra,"factory",Aa);var Fa=Ra,qa=O(de),Da=qa.stderr,La=qa.stdin,Ba=qa.stdout,Ua={objectMode:!1,encoding:null,allowHalfOpen:!1,decodeStrings:!0},Ga=d,Ka=l,Qa=i,Xa=u.isPrimitive,Ya=h.isPrimitive,Za=c.isPrimitive,$a=n;var ed=function(e,t){return Ga(t)?Ka(t,"transform")&&(e.transform=t.transform,!Qa(e.transform))?new TypeError($a("invalid option. `%s` option must be a function. Option: `%s`.","transform",e.transform)):Ka(t,"flush")&&(e.flush=t.flush,!Qa(e.flush))?new TypeError($a("invalid option. `%s` option must be a function. Option: `%s`.","flush",e.flush)):Ka(t,"objectMode")&&(e.objectMode=t.objectMode,!Xa(e.objectMode))?new TypeError($a("invalid option. `%s` option must be a boolean. Option: `%s`.","objectMode",e.objectMode)):Ka(t,"encoding")&&(e.encoding=t.encoding,!Za(e.encoding))?new TypeError($a("invalid option. `%s` option must be a string. Option: `%s`.","encoding",e.encoding)):Ka(t,"allowHalfOpen")&&(e.allowHalfOpen=t.allowHalfOpen,!Xa(e.allowHalfOpen))?new TypeError($a("invalid option. `%s` option must be a boolean. Option: `%s`.","allowHalfOpen",e.allowHalfOpen)):Ka(t,"highWaterMark")&&(e.highWaterMark=t.highWaterMark,!Ya(e.highWaterMark))?new TypeError($a("invalid option. `%s` option must be a nonnegative number. Option: `%s`.","highWaterMark",e.highWaterMark)):Ka(t,"decodeStrings")&&(e.decodeStrings=t.decodeStrings,!Xa(e.decodeStrings))?new TypeError($a("invalid option. `%s` option must be a boolean. Option: `%s`.","decodeStrings",e.decodeStrings)):null:new TypeError($a("invalid argument. Options argument must be an object. Value: `%s`.",t))},td=a,id=ve("transform-stream:destroy");var rd=function(e){var t;return this._destroyed?(id("Attempted to destroy an already destroyed stream."),this):(t=this,this._destroyed=!0,td((function(){e&&(id("Stream was destroyed due to an error. Error: %s.",JSON.stringify(e)),t.emit("error",e));id("Closing the stream..."),t.emit("close")})),this)},nd=ve("transform-stream:transform");var od=function(e,t,i){nd("Received a new chunk. Chunk: %s. Encoding: %s.",e.toString(),t),i(null,e)},sd=ve,ad=ue.Transform,dd=o,ld=r,ud=Ua,hd=ed,pd=rd,cd=od,md=sd("transform-stream:main");function fd(e){var t,i;if(!(this instanceof fd))return arguments.length?new fd(e):new fd;if(t=ld(ud),arguments.length&&(i=hd(t,e)))throw i;return md("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),ad.call(this,t),this._destroyed=!1,t.transform?this._transform=t.transform:this._transform=cd,t.flush&&(this._flush=t.flush),this}dd(fd,ad),fd.prototype.destroy=pd;var gd=fd,bd=d,vd=n,wd=r,yd=gd;var jd=function(e){var t;if(arguments.length){if(!bd(e))throw new TypeError(vd("invalid argument. Options argument must be an object. Value: `%s`.",e));t=wd(e)}else t={};return t.objectMode=!0,new yd(t)},_d=d,Md=n,Od=r,Ed=gd;var Td=function(e){var t;if(arguments.length){if(!_d(e))throw new TypeError(Md("invalid argument. Options argument must be an object. Value: `%s`.",e));t=Od(e)}else t={};return i;function i(e,i){return t.transform=e,arguments.length>1?t.flush=i:delete t.flush,new Ed(t)}},kd=ve,Sd=ue.Transform,xd=o,Wd=r,Vd=Ua,Pd=ed,zd=rd,Nd=od,Cd=kd("transform-stream:ctor");var Jd=function(e){var t,i,r;if(i=Wd(Vd),arguments.length&&(r=Pd(i,e)))throw r;function n(e){var t,r;if(!(this instanceof n))return arguments.length?new n(e):new n;if(t=Wd(i),arguments.length&&(r=Pd(t,e)))throw r;return Cd("Creating a transform stream configured with the following options: %s.",JSON.stringify(t)),Sd.call(this,t),this._destroyed=!1,this}return t=i.transform?i.transform:Nd,xd(n,Sd),n.prototype._transform=t,i.flush&&(n.prototype._flush=i.flush),n.prototype.destroy=zd,n},Hd=t,Id=gd,Rd=Td,Ad=Jd;Hd(Id,"objectMode",jd),Hd(Id,"factory",Rd),Hd(Id,"ctor",Ad);var Fd=Id,qd=e,Dd={};qd(Dd,"debugStream",yt),qd(Dd,"debugSinkStream",Vi),qd(Dd,"emptyStream",tr),qd(Dd,"arrayStream",Ir),qd(Dd,"circularArrayStream",Mn),qd(Dd,"constantStream",ao),qd(Dd,"iteratorStream",Lo),qd(Dd,"stridedArrayStream",ks),qd(Dd,"inspectStream",qe),qd(Dd,"inspectSinkStream",Zt),qd(Dd,"joinStream",oa),qd(Dd,"splitStream",Fa),qd(Dd,"stderr",Da),qd(Dd,"stdin",La),qd(Dd,"stdout",Ba),qd(Dd,"transformStream",Fd);var Ld=Dd,Bd={};e(Bd,"node",Ld);var Ud=Bd;export{Ud as default,Ld as node};
//# sourceMappingURL=index.mjs.map
